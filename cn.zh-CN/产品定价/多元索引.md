# 多元索引 {#concept_287174 .concept}

使用多元索引时，索引数据会产生额外的数据存储量，索引查询也会消耗读CU。

**说明：** 索引表单独计量计费，和主表无关。

费用组成

多元索引的计量计费包括存储、读CU以及外网下行流量：

-   存储

    表格存储对索引的数据总量按小时计费。由于索引中字段类型、索引类型的不同会导致最终占用的系统资源差异极大，索引的存储量没有按照主表的原始数据大小计费，而是根据建完索引后的压缩数据大小进行计费。

-   读CU

    CU（Capacity Unit）指读服务能力单元和写服务能力单元，是数据读写操作的最小计费单位。每秒1次4KB单行读操作为1个预留读CU。读CU费用包含预留读CU和按量读CU：

    -   预留读CU

        表格存储会根据索引数据规模自动为您设置一个预留读CU。预留读CU费用包含以下资源消耗：

        -   创建索引时，会先从主表中读取数据，从而消耗一定读CU。
        -   创建索引需要消耗写CU，且创建索引时可能还会有分词，对资源的消耗会比较高。这部分费用也会包括在预留读CU中，不会再额外计费。
        -   为了保证索引和查询的性能，索引的部分内容会提前加载进内存且内存常驻，并消耗系统的内存资源。这部分费用也会包括在预留读CU中，不会再额外计费。
        查询索引时不超过预留读CU的部分将按照预留读的单价进行计费。例如，一个索引的预留读CU为10000，使用索引查询时，每次查询10行数据，每行小于4KB，当查询QPS（每秒查询率）小于1000时查询CU都会被预留CU覆盖，这部分查询不会再额外收费。

        预留读CU生成规则：预留读CU和索引的数据大小和行数成正比，1GB或200万行数据对应10CU，当数据大小和行数对应的预留读CU不一致时，系统会取两者中较大值作为预留读CU。

        **说明：** 预留读的上限为10万CU，即系统最多可为您设置10万CU预留读。

    -   按量读CU

        如实际读超出了预留读，超出的部分按照按量读CU进行计费。

-   外网下行流量

    外网下行流量即为外网流出流量的费用，采用按量付费。


存储和读CU计费项费用参见下表：

|类别|存储|读CU|
|:-|:-|:--|
|公式|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/20253/155909390837290_zh-CN.png) **说明：** Size指索引压缩后的大小。

 | 索引预留读CU：

![](images/37291_zh-CN_source.png)

 查询读CU：![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/20253/155909390837292_zh-CN.png)

 **说明：** 

-   Size指索引压缩后的大小。
-   Rows指索引中数据总行数，不包括嵌套类型的子行。
-   ReturnRowSize指返回行的大小。
-   ReturnRowCount指返回行的数量。

 |
|单价|索引数据都是存储在高性能磁盘上，所以存储费用和高性能实例的数据存储费用一致。具体价格参见[产品定价](https://www.aliyun.com/price/product?spm=5176.54465.905680.btn3.64ab6184B1X9th#/ots/detail)。|读CU的单价与高性能实例的读CU单价一致。具体价格参见[产品定价](https://www.aliyun.com/price/product?spm=5176.54465.905680.btn3.64ab6184B1X9th#/ots/detail)。|
|单位|GB，不足1GB的按1GB向上取整。|CU，每行返回数据大小除以4KB的倍数后向上取整。|

示例

|存储|行数|费用计算|
|:-|:-|:---|
|8GB|900万行| -   存储费用：8 \* 0.0015元/GB/小时 = 0.012元/小时
-   生成预留读规则：8GB对应80预留读CU，900万行对应45预留读CU，两者都小于100CU，则预留读按100CU计算。

预留读CU费用：100 \* 0.00056元/CU/小时=0.056元/小时

-   总费用：0.012元/小时 + 0.056元/小时=0.068元/小时

 如果实际读超过预留读CU，超出部分按照按量读CU进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |
|100GB|3亿行| -   存储费用：100 \* 0.0015元/GB/小时 = 0.15元/小时
-   生成预留读规则：100GB对应1000CU，3亿行数据对应1500CU，则预留读CU取两者中较大值则是1500CU。

预留读CU费用：1500 \* 0.00056元/CU/小时 = 0.84元/小时

-   总费用： 0.15元/小时 + 0.84元/小时 = 0.99元/小时

 如果实际读超过预留读CU，超出部分按照按量读CU进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |
|30TB|100亿行| -   存储费用：30000 \* 0.0015元/GB/小时 = 45元/小时
-   生成预留读规则：30TB对应30万CU，100亿行对应5万CU，取较大者是30万CU，然后同上限10万CU取较小者，则是10万CU。

预留读CU的费用就是100000 \* 0.00056元/CU/小时 =56元/小时

-   总费用：45元/小时 + 56元/小时 = 101元/小时

 如果实际读超过预留读CU，超出部分按照按量读CU进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |

**说明：** 上表中的价格仅供参考，具体价格请以控制台为准。

