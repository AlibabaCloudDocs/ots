# 多元索引 {#concept_287174 .concept}

使用多元索引时，索引数据会产生额外的数据存储量，索引查询也会消耗读吞吐量。本文主要为您介绍多元索引的计费项及计费公式。

**说明：** 

-   索引表单独计量计费，和主表无关。
-   仅高性能实例支持使用多元索引，且多元索引的各计费项的价格和高性能实例费用一致。

## 计费项 {#section_zcn_rdx_qkk .section}

|计费项|计费方式|描述|
|---|----|--|
|数据存储量| -   按量付费
-   包年包月

 | 单位：GB，不足1GB的按1GB向上取整。

 表格存储对索引的数据总量按小时计费。由于索引中字段类型、索引类型的不同会导致最终占用的系统资源差异极大，索引的存储量没有按照主表的原始数据大小计费，而是根据建完索引后的压缩数据大小进行计费。|
|读吞吐量|预留读吞吐量| 按量付费

 | 单位：[CU](../../../../cn.zh-CN/数据模型/Wide Column/读写吞吐量.md#)

 表格存储会根据索引数据规模自动为您设置一个预留读吞吐量。预留读吞吐量费用包含以下资源消耗：

-   创建索引时，会先从主表中读取数据，从而消耗一定读吞吐量。
-   创建索引需要消耗写吞吐量，且创建索引时可能还会有分词，对资源的消耗会比较高。这部分费用也会包括在预留读吞吐量中，不会再额外计费。
-   为了保证索引和查询的性能，索引的部分内容会提前加载进内存且内存常驻，并消耗系统的内存资源。这部分费用也会包括在预留读吞吐量中。

 查询索引时不超过预留读吞吐量的部分将按照预留读的单价进行计费。例如，一个索引的预留读吞吐量为10000CU，使用索引查询时，每次查询10行数据，每行小于4KB，当查询QPS（每秒查询率）小于1000时查询吞吐量都会被预留吞吐量覆盖，这部分查询不会再额外收费。

 预留读吞吐量生成规则：预留读吞吐量和索引的数据大小和行数成正比，1GB或200万行数据对应10CU。当数据大小和行数对应的预留读吞吐量不一致时，系统会取两者中较大值作为预留读吞吐量。

 **说明：** 

-   预留读的上限为10万CU，即系统最多可为您设置10万CU预留读。
-   数据存储量小于200MB，且数据行数小于40万行时，预留读最低设置为20CU。

 |
|按量读吞吐量| -   按量付费
-   包年包月

 | 单位：[CU](../../../../cn.zh-CN/数据模型/Wide Column/读写吞吐量.md#)

 如实际读超出了预留读，超出的部分按照按量读吞吐量进行计费。|
|外网下行流量|按量付费| 单位：GB

 外网流出流量的费用。|

## 计费公式 {#section_4q8_j4f_9bh .section}

下表为您介绍了多元索引的数据存储量以及读吞吐量的计算公式：

|计费项|公式|描述|
|---|--|--|
|数据存储量|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/20253/156291451937290_zh-CN.png)|Size指索引压缩后的大小。|
|读吞吐量| 索引预留读CU：

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/236161/156291451950895_zh-CN.png)

 查询读CU：![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/20253/156291451937292_zh-CN.png)

 | -   Size指索引压缩后的大小。
-   Rows指索引中数据总行数，不包括嵌套类型的子行。
-   ReturnRowSize指返回行的大小。
-   ReturnRowCount指返回行的数量。

 |

## 计费示例 {#section_zyf_onn_cvv .section}

|存储|行数|费用计算|
|:-|:-|:---|
|8GB|900万行| -   存储费用：8 \* 0.0015元/GB/小时 = 0.012元/小时
-   预留读吞吐量生成规则：8GB对应80CU，900万行对应45CU。

预留读吞吐量费用：80 \* 0.00056元/CU/小时=0.0448元/小时

-   总费用：0.012元/小时 + 0.0448元/小时=0.0568元/小时

 如果实际读超过预留读吞吐量，超出部分按照按量读吞吐量进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |
|100GB|3亿行| -   存储费用：100 \* 0.0015元/GB/小时 = 0.15元/小时
-   预留读吞吐量生成规则：100GB对应1000CU，3亿行数据对应1500CU，则预留读吞吐量取两者中较大值则是1500CU。

预留读吞吐量费用：1500 \* 0.00056元/CU/小时 = 0.84元/小时

-   总费用： 0.15元/小时 + 0.84元/小时 = 0.99元/小时

 如果实际读超过预留读吞吐量，超出部分按照按量读吞吐量进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |
|30TB|100亿行| -   存储费用：30000 \* 0.0015元/GB/小时 = 45元/小时
-   预留读吞吐量生成规则：30TB对应30万CU，100亿行对应5万CU，取较大者是30万CU，然后同上限10万CU取较小者，则是10万CU。

预留读吞吐量费用：100000 \* 0.00056元/CU/小时 =56元/小时

-   总费用：45元/小时 + 56元/小时 = 101元/小时

 如果实际读超过预留读吞吐量，超出部分按照按量读吞吐量进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |

**说明：** 上表中的价格仅供参考，具体价格请以控制台为准。

