# 计量项和计费说明 {#concept_w4k_2tj_bfb .concept}

## 主表计量计费 {#section_z5s_cd5_lgb .section}

**计量项**

表格存储计量项包括数据存储量、预留读/写吞吐量、按量读/写吞吐量和外网下行流量。

-   数据存储量

    表格存储对实例的数据总量按小时计费。由于用户的数据总量会动态变化，因此表格存储以固定的时间间隔统计数据表所有分区的数据总量大小，计算每小时数据总量的平均值，将平均值乘以单价进行计费。有关数据存储更多详情，请参见[数据存储量](cn.zh-CN/产品定价/数据存储量.md#)。

-   预留读/写吞吐量

    预留读/写吞吐量是表的一项属性。预留读写吞吐量能够获得较低的资源使用成本，为数据表设置合理的预留读/写吞吐量能够有效地降低使用成本。

    容量型实例不支持预留读/写吞吐量。表格存储对高性能实例下所有表的预留读/写吞吐量之和按小时计费。用户配置的预留读/写吞吐量可能会动态变化，表格存储以固定的时间间隔统计表的预留读/写吞吐量，计算每个小时的预留读/写吞吐量的平均值，再将平均值乘以小时单价进行计费。

-   按量读/写吞吐量

    按量读/写吞吐量为每一秒钟实际消耗的读/写吞吐量中超出预留读/写吞吐量的部分，统计周期为 1 秒。

    表格存储按照账单周期对实例下所有表的按量读吞吐量和按量写吞吐量分别进行累加，并使用实际使用的按量吞吐量的值乘以对应的单价进行计费。

-   外网下行流量

    应用程序访问表格存储所产生的外网下行流量会被计费。应用程序使用 HTTP 方式访问表格存储返回的响应是下行流量的主要成分。即使操作失败，表格存储返回操作失败信息，也会产生下行流量。

    表格存储仅对外网下行流量收费，对上行流量和通过内网访问的流量均不收费。

    **说明：** 不同 Region 间的访问也属于外网访问。


表格存储各个计量项及其计费标准和计费方式说明，请参见下表：

|计量项|计费标准|计费方式|
|:--|:---|:---|
|数据存储量|每个实例的数据总量费用| 按量付费

 包年包月（存储资源包）

 |
|预留读/写吞吐量|您配置的预留读吞吐量和预留写吞吐量的费用|按量付费|
|按量读/写吞吐量|实际消耗的读吞吐量和写吞吐量的费用（超出预留读/写吞吐量的部分）| 按量付费

 包年包月（按量读资源包/按量写资源包）

 |
|外网下行流量|外网流出流量的费用|按量付费|

**说明：** 

-   具体计费标准，请参见[表格存储价格详情页](https://www.aliyun.com/price/product#/ots/detail)。
-   您可以使用[价格计算器](https://www.aliyun.com/price/product#/ots/calculator)对产品价格成本进行初步估算。
-   预留读/写吞吐量的单价、按量读/写吞吐量的单价、流量单价以及数据存储单价均可能发生变化，请参见[表格存储价格详情页](https://www.aliyun.com/price/product#/ots/detail)。

**计费对比**

表格存储提供两种计费方式：按量付费和资源包（包年包月）。有关计费说明、到期/欠费、以及续费/升配说明，请参见下表：

|计费方式|计费说明|到期/欠费说明|续费/升配说明|
|:---|:---|:------|:------|
|按量付费| -   按小时计费。
-   后付费方式，创建表之后才会进行计量计费。

 | -   表格存储以小时为单位结算，若当前周期内账户可用余额小于本周期账单金额，系统会以短信、邮件的方式提醒您。
-   欠费 24 小时内，系统会以短信、邮件的方式提醒您尽快充值，期间各项服务不受影响。
-   欠费 24 小时后，若您仍未充值补足欠费，阿里云将暂停提供服务、冻结您账户下表格存储的操作，但仍会存储您的数据并持续计费。同时，系统会以短信、邮件的方式提醒您。
-   若欠费超过 7 天，却仍未成功充值补足欠费，阿里云将会终止本服务条款并停止为其继续提供服务。同时，您保存在表格存储的全部数据将会被删除并清空，且不可恢复。数据清空前 1 天，系统会以短信、邮件的方式提醒您。

 |按量付费实例根据实际使用时间计费，无需续费，在阿里云管理控制台上充值账户即可。|
|[资源包](cn.zh-CN/产品定价/资源包（包年包月）/新购.md#)（包年包月）| -   可预先购买数据存储、按量读吞吐量和按量写吞吐量的资源包。
-   每个实例在计费时均优先使用该云账号下相同地域相同规格的资源包额度进行抵扣，超出部分按量付费。

 | -   距离到期时间 7 天，系统会以短信、邮件的方式提醒您。
-   资源包到期后，按量付费。系统会以短信、邮件的方式提醒您。

 |可以在控制台上对资源包进行升级配置，或者重新购买资源包。|

## 多元索引计量计费 {#section_jtb_jd5_lgb .section}

使用多元索引时，索引数据会产生额外的数据存储量，索引查询也会消耗读CU。

**说明：** 索引表单独计量计费，和主表无关。

**费用组成**

多元索引的计量计费包括存储、读CU以及外网下行流量：

-   存储

    表格存储对索引的数据总量按小时计费。由于索引中字段类型、索引类型的不同会导致最终占用的系统资源差异极大，索引的存储量没有按照主表的原始数据大小计费，而是根据建完索引后的压缩数据大小进行计费。

-   读CU

    CU（Capacity Unit）指读服务能力单元和写服务能力单元，是数据读写操作的最小计费单位。每秒1次4KB单行读操作为1个预留读CU。读CU费用包含预留读CU和按量读CU：

    -   预留读CU

        表格存储会根据索引数据规模自动为您设置一个预留读CU。预留读CU费用包含以下资源消耗：

        -   创建索引时，会先从主表中读取数据，从而消耗一定读CU。
        -   创建索引需要消耗写CU，且创建索引时可能还会有分词，对资源的消耗会比较高。这部分费用也会包括在预留读CU中，不会再额外计费。
        -   为了保证索引和查询的性能，索引的部分内容会提前加载进内存且内存常驻，并消耗系统的内存资源。这部分费用也会包括在预留读CU中，不会再额外计费。
        查询索引时不超过预留读CU的部分将按照预留读的单价进行计费。例如，一个索引的预留读CU为10000，使用索引查询时，每次查询10行数据，每行小于4KB，当查询QPS（每秒查询率）小于1000时查询CU都会被预留CU覆盖，这部分查询不会再额外收费。

        预留读CU生成规则：预留读CU和索引的数据大小和行数成正比，1GB或200万行数据对应10CU，当数据大小和行数对应的预留读CU不一致时，系统会取两者中较大值作为预留读CU。

    -   按量读CU

        如实际读超出了预留读，超出的部分按照按量读CU进行计费。

-   外网下行流量

    外网下行流量即为外网流出流量的费用，采用按量付费。


存储和读CU计费项费用参见下表：

|类别|存储|读CU|
|:-|:-|:--|
|公式|![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/20253/155201039637290_zh-CN.png)**说明：** Size指索引压缩后的大小。

| 索引预留读CU：

![](images/37291_zh-CN_source.png)

 查询读CU：![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/20253/155201039637292_zh-CN.png)

 **说明：** 

-   Size指索引压缩后的大小。
-   Rows指索引中数据总行数，不包括嵌套类型的子行。
-   ReturnRowSize指返回行的大小。
-   ReturnRowCount指返回行的数量。

 |
|单价|索引数据都是存储在高性能磁盘上，所以存储费用和高性能实例的数据存储费用一致。具体价格参见[产品定价](https://www.aliyun.com/price/product?spm=5176.54465.905680.btn3.64ab6184B1X9th#/ots/detail)。|读CU的单价与高性能实例的读CU单价一致。具体价格参见[产品定价](https://www.aliyun.com/price/product?spm=5176.54465.905680.btn3.64ab6184B1X9th#/ots/detail)。|
|单位|GB，不足1 GB的按1GB向上取整。|CU，每行返回数据大小除以4KB的倍数后向上取整。|

**示例**

|存储|行数|费用计算|
|:-|:-|:---|
|8GB|900万行| -   存储费用：8 \* 0.0015元/GB/小时 = 0.012元/小时
-   生成预留读规则：8GB对应80预留读CU，900万行对应45预留读CU，两者都小于100CU，则预留读按100CU计算。

预留读CU费用：100 \* 0.00056元/CU/小时=0.056元/小时

-   总费用：0.012元/小时 + 0.056元/小时=0.068元/小时

 如果实际读超过预留读CU，超出部分按照按量读CU进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |
|100GB|3亿行| -   存储费用：100 \* 0.0015元/GB/小时 = 0.15元/小时
-   生成预留读规则：100GB对应1000CU，3亿行数据对应1500CU，则预留读CU取两者中较大值则是1500CU。

预留读CU费用：1500 \* 0.00056元/CU/小时 = 0.84元/小时

-   总费用： 0.15元/小时 + 0.84元/小时 = 0.99元/小时

 如果实际读超过预留读CU，超出部分按照按量读CU进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |
|30TB|100亿行| -   存储费用：30000 \* 0.0015元/GB/小时 = 45元/小时
-   生成预留读规则：30TB对应30万CU，100亿行对应5万CU，取较大者是30万CU。

预留读CU的费用就是300000 \* 0.00056元/CU/小时 =168元/小时。

-   总费用：45元/小时 + 168元/小时 = 213元/小时

 如果实际读超过预留读CU，超出部分按照按量读CU进行计费。如产生外网下行流量，外网下行流量费用同主表一致。

 |

**说明：** 上表中的价格仅供参考，具体价格请以控制台为准。

